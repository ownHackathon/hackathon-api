<?php

declare(strict_types=1);

return static function (Mezzio\Application $app): void {
    $app->get(
        '/',
        [
            App\Handler\IndexHandler::class,
        ],
        App\Handler\IndexHandler::class
    );
    $app->get(
        '/event[/]',
        [
            App\Handler\EventAboutHandler::class,
        ],
        App\Handler\EventAboutHandler::class
    );
    $app->get(
        '/event/create[/]',
        [
            Authentication\Middleware\IsLoginAuthenticationMiddleware::class,
            App\Handler\EventCreateHandler::class,
        ],
        App\Handler\EventCreateHandler::class
    );
    $app->post(
        '/event/create[/]',
        [
            Authentication\Middleware\IsLoginAuthenticationMiddleware::class,
            App\Middleware\EventCreateValidationMiddleware::class,
            App\Middleware\EventCreateMiddleware::class,
            App\Handler\EventCreateSubmitHandler::class,
        ],
        App\Handler\EventCreateSubmitHandler::class
    );
    $app->get(
        '/event/{eventId:\d+}[/]',
        [
            App\Middleware\EventMiddleware::class,
            App\Middleware\UserMiddleware::class,
            App\Middleware\EventParticipantMiddleware::class,
            App\Middleware\ParticipantProjectMiddleware::class,
            App\Middleware\TopicListAvailableMiddleware::class,
            App\Handler\EventHandler::class,
        ],
        App\Handler\EventHandler::class
    );
    $app->get(
        '/event/show/{eventName}[/]',
        [
            App\Middleware\EventNameMiddleware::class,
            App\Handler\EventNameHandler::class,
        ],
        App\Handler\EventNameHandler::class
    );
    $app->get(
        '/event/list[/]',
        [
            App\Middleware\EventListMiddleware::class,
            App\Handler\EventListHandler::class,
        ],
        App\Handler\EventListHandler::class
    );
    $app->get(
        '/event/participant/subscribe/{eventId:\d+}[/]',
        [
            Authentication\Middleware\IsLoginAuthenticationMiddleware::class,
            App\Middleware\EventParticipantSubscribeMiddleware::class,
            App\Handler\EventParticipantSubscribeHandler::class,
        ],
        App\Handler\EventParticipantSubscribeHandler::class
    );
    $app->get(
        '/project/{projectId:\d+}[/]',
        [
            App\Middleware\ProjectMiddleware::class,
            App\Middleware\ProjectParticipantMiddleware::class,
            App\Middleware\ProjectOwnerMiddleware::class,
            App\Middleware\ProjectEventRatingReleasedMiddleware::class,
            App\Middleware\ProjectCategoryRatingMiddleware::class,
            App\Handler\ProjectHandler::class,
        ],
        App\Handler\ProjectHandler::class
    );

    $app->get(
        '/user/register[/]',
        [
            Administration\Handler\UserRegisterHandler::class,
        ],
        Administration\Handler\UserRegisterHandler::class
    );
    $app->post(
        '/user/register[/]',
        [
            Administration\Middleware\UserRegisterValidationMiddleware::class,
            Administration\Middleware\UserRegisterMiddleware::class,
            Administration\Handler\UserRegisterSubmitHandler::class,
        ],
        Administration\Handler\UserRegisterSubmitHandler::class
    );
    $app->get(
        '/user/{userId:\d+}[/]',
        [
            App\Middleware\UserMiddleware::class,
            App\Handler\UserHandler::class,
        ],
        App\Handler\UserHandler::class
    );

    $app->get(
        '/login[/]',
        [
            Authentication\Handler\LoginHandler::class,
        ],
        Authentication\Handler\LoginHandler::class
    );
    $app->post(
        '/login[/]',
        [
            Authentication\Middleware\LoginValidationMiddleware::class,
            Authentication\Middleware\LoginAuthenticationMiddleware::class,
            Authentication\Handler\LoginHandler::class,
        ],
        Authentication\Middleware\LoginAuthenticationMiddleware::class
    );

    $app->get(
        '/logout[/]',
        [

            Authentication\Handler\LogoutHandler::class,
        ],
        Authentication\Handler\LogoutHandler::class
    );

    $app->get(
        '/topic/submit[/]',
        [
            App\Middleware\TopicEntryStatisticMiddleware::class,
            App\Handler\TopicHandler::class,
        ],
        App\Handler\TopicHandler::class
    );

    $app->post(
        '/topic/submit[/]',
        [
            App\Middleware\TopicCreateValidationMiddleware::class,
            App\Middleware\TopicSubmitMiddleware::class,
            App\Middleware\TopicEntryStatisticMiddleware::class,
            App\Handler\TopicSubmitHandler::class,
        ],
        App\Handler\TopicSubmitHandler::class
    );

    $app->get(
        '/api/ping',
        [
            App\Handler\PingHandler::class,
        ],
        App\Handler\PingHandler::class
    );

    $app->get(
        '/admin[/]',
        [
            Authentication\Middleware\AdministrationAuthenticationMiddleware::class,
            Administration\Handler\IndexHandler::class,
        ],
        Administration\Handler\IndexHandler::class
    );
};
